// This file is automatically generated - DO NOT EDIT MANUALLY!
using System.Collections.Generic;
using Unity.Labs.MARS.Query;

namespace Unity.Labs.MARS.Data
{
    public partial class MARSDatabase
    {
        bool FindTraitsInternal(Conditions conditions, CachedTraitCollection cache)
        {
            if (conditions.GetTypeCount(out ISemanticTagCondition[] semanticTagConditions) > 0)
            {
                if(!cache.TryGetType(out List<Dictionary<int, System.Boolean>> semanticTagCollections))
                    return false;

                for(var i = 0; i < semanticTagConditions.Length; i++)
                {
                    var condition = semanticTagConditions[i];
                    if(!SemanticTagTraitProvider.TryGetAllTraitValues(condition.traitName, out Dictionary<int, System.Boolean> traits))
                        if(condition.matchRule == SemanticTagMatchRule.Match)
                            return false;

                    semanticTagCollections[i] = traits;
                }
            }

            if (conditions.GetTypeCount(out ICondition<System.Int32>[] intConditions) > 0)
            {
                if(!cache.TryGetType(out List<Dictionary<int, System.Int32>> intCollections))
                    return false;

                for(var i = 0; i < intConditions.Length; i++)
                {
                    var condition = intConditions[i];
                    if(!IntTraitProvider.TryGetAllTraitValues(condition.traitName, out Dictionary<int, System.Int32> traits))
                        return false;

                    intCollections[i] = traits;
                }
            }

            if (conditions.GetTypeCount(out ICondition<System.Single>[] floatConditions) > 0)
            {
                if(!cache.TryGetType(out List<Dictionary<int, System.Single>> floatCollections))
                    return false;

                for(var i = 0; i < floatConditions.Length; i++)
                {
                    var condition = floatConditions[i];
                    if(!FloatTraitProvider.TryGetAllTraitValues(condition.traitName, out Dictionary<int, System.Single> traits))
                        return false;

                    floatCollections[i] = traits;
                }
            }

            if (conditions.GetTypeCount(out ICondition<System.String>[] stringConditions) > 0)
            {
                if(!cache.TryGetType(out List<Dictionary<int, System.String>> stringCollections))
                    return false;

                for(var i = 0; i < stringConditions.Length; i++)
                {
                    var condition = stringConditions[i];
                    if(!StringTraitProvider.TryGetAllTraitValues(condition.traitName, out Dictionary<int, System.String> traits))
                        return false;

                    stringCollections[i] = traits;
                }
            }

            if (conditions.GetTypeCount(out ICondition<UnityEngine.Pose>[] poseConditions) > 0)
            {
                if(!cache.TryGetType(out List<Dictionary<int, UnityEngine.Pose>> poseCollections))
                    return false;

                for(var i = 0; i < poseConditions.Length; i++)
                {
                    var condition = poseConditions[i];
                    if(!PoseTraitProvider.TryGetAllTraitValues(condition.traitName, out Dictionary<int, UnityEngine.Pose> traits))
                        return false;

                    poseCollections[i] = traits;
                }
            }

            if (conditions.GetTypeCount(out ICondition<UnityEngine.Vector2>[] vector2Conditions) > 0)
            {
                if(!cache.TryGetType(out List<Dictionary<int, UnityEngine.Vector2>> vector2Collections))
                    return false;

                for(var i = 0; i < vector2Conditions.Length; i++)
                {
                    var condition = vector2Conditions[i];
                    if(!Vector2TraitProvider.TryGetAllTraitValues(condition.traitName, out Dictionary<int, UnityEngine.Vector2> traits))
                        return false;

                    vector2Collections[i] = traits;
                }
            }

            if (conditions.GetTypeCount(out ICondition<UnityEngine.Vector3>[] vector3Conditions) > 0)
            {
                if(!cache.TryGetType(out List<Dictionary<int, UnityEngine.Vector3>> vector3Collections))
                    return false;

                for(var i = 0; i < vector3Conditions.Length; i++)
                {
                    var condition = vector3Conditions[i];
                    if(!Vector3TraitProvider.TryGetAllTraitValues(condition.traitName, out Dictionary<int, UnityEngine.Vector3> traits))
                        return false;

                    vector3Collections[i] = traits;
                }
            }
            return true;
        }

        public bool UpdateQueryMatchInternal(int dataID,
            Conditions conditions, ContextTraitRequirements requirements, QueryResult result)
        {
            if (conditions.TryGetType(out ICondition<System.Int32>[] intConditions))
            {
                foreach (var condition in intConditions)
                {
                    if (!IntTraitProvider.TryGetTraitValue(dataID, condition.traitName, out var traitValue))
                        return false;
                    if (condition.PassesCondition(ref traitValue))
                        result.SetTrait(condition.traitName, traitValue);
                    else
                        return false;
                }
            }

            if (conditions.TryGetType(out ICondition<System.Single>[] floatConditions))
            {
                foreach (var condition in floatConditions)
                {
                    if (!FloatTraitProvider.TryGetTraitValue(dataID, condition.traitName, out var traitValue))
                        return false;
                    if (condition.PassesCondition(ref traitValue))
                        result.SetTrait(condition.traitName, traitValue);
                    else
                        return false;
                }
            }

            if (conditions.TryGetType(out ICondition<System.String>[] stringConditions))
            {
                foreach (var condition in stringConditions)
                {
                    if (!StringTraitProvider.TryGetTraitValue(dataID, condition.traitName, out var traitValue))
                        return false;
                    if (condition.PassesCondition(ref traitValue))
                        result.SetTrait(condition.traitName, traitValue);
                    else
                        return false;
                }
            }

            if (conditions.TryGetType(out ICondition<UnityEngine.Vector2>[] vector2Conditions))
            {
                foreach (var condition in vector2Conditions)
                {
                    if (!Vector2TraitProvider.TryGetTraitValue(dataID, condition.traitName, out var traitValue))
                        return false;
                    if (condition.PassesCondition(ref traitValue))
                        result.SetTrait(condition.traitName, traitValue);
                    else
                        return false;
                }
            }

            if (conditions.TryGetType(out ICondition<UnityEngine.Vector3>[] vector3Conditions))
            {
                foreach (var condition in vector3Conditions)
                {
                    if (!Vector3TraitProvider.TryGetTraitValue(dataID, condition.traitName, out var traitValue))
                        return false;
                    if (condition.PassesCondition(ref traitValue))
                        result.SetTrait(condition.traitName, traitValue);
                    else
                        return false;
                }
            }

            return true;
        }

        internal void FillSemanticTagRequirement(TraitRequirement requirement, int dataId, QueryResult result)
        {
            FillRequirementType(requirement, dataId, result, SemanticTagTraitProvider);
        }

        internal void FillIntRequirement(TraitRequirement requirement, int dataId, QueryResult result)
        {
            FillRequirementType(requirement, dataId, result, IntTraitProvider);
        }

        internal void FillFloatRequirement(TraitRequirement requirement, int dataId, QueryResult result)
        {
            FillRequirementType(requirement, dataId, result, FloatTraitProvider);
        }

        internal void FillStringRequirement(TraitRequirement requirement, int dataId, QueryResult result)
        {
            FillRequirementType(requirement, dataId, result, StringTraitProvider);
        }

        internal void FillVector2Requirement(TraitRequirement requirement, int dataId, QueryResult result)
        {
            FillRequirementType(requirement, dataId, result, Vector2TraitProvider);
        }

        internal void FillVector3Requirement(TraitRequirement requirement, int dataId, QueryResult result)
        {
            FillRequirementType(requirement, dataId, result, Vector3TraitProvider);
        }

        internal bool UpdateSemanticTagRequirement(TraitRequirement requirement, int dataId, QueryResult result)
        {
            return TryUpdateRequirementType(requirement, dataId, result, SemanticTagTraitProvider);
        }

        internal bool UpdateIntRequirement(TraitRequirement requirement, int dataId, QueryResult result)
        {
            return TryUpdateRequirementType(requirement, dataId, result, IntTraitProvider);
        }

        internal bool UpdateFloatRequirement(TraitRequirement requirement, int dataId, QueryResult result)
        {
            return TryUpdateRequirementType(requirement, dataId, result, FloatTraitProvider);
        }

        internal bool UpdateStringRequirement(TraitRequirement requirement, int dataId, QueryResult result)
        {
            return TryUpdateRequirementType(requirement, dataId, result, StringTraitProvider);
        }

        internal bool UpdateVector2Requirement(TraitRequirement requirement, int dataId, QueryResult result)
        {
            return TryUpdateRequirementType(requirement, dataId, result, Vector2TraitProvider);
        }

        internal bool UpdateVector3Requirement(TraitRequirement requirement, int dataId, QueryResult result)
        {
            return TryUpdateRequirementType(requirement, dataId, result, Vector3TraitProvider);
        }

        void AddRequirementUpdateMethods(MARSDatabase self)
        {
            TypeToRequirementUpdate[typeof(System.Boolean)] = UpdateSemanticTagRequirement;
            TypeToRequirementFill[typeof(System.Boolean)] = FillSemanticTagRequirement;

            TypeToRequirementUpdate[typeof(System.Int32)] = UpdateIntRequirement;
            TypeToRequirementFill[typeof(System.Int32)] = FillIntRequirement;

            TypeToRequirementUpdate[typeof(System.Single)] = UpdateFloatRequirement;
            TypeToRequirementFill[typeof(System.Single)] = FillFloatRequirement;

            TypeToRequirementUpdate[typeof(System.String)] = UpdateStringRequirement;
            TypeToRequirementFill[typeof(System.String)] = FillStringRequirement;

            TypeToRequirementUpdate[typeof(UnityEngine.Vector2)] = UpdateVector2Requirement;
            TypeToRequirementFill[typeof(UnityEngine.Vector2)] = FillVector2Requirement;

            TypeToRequirementUpdate[typeof(UnityEngine.Vector3)] = UpdateVector3Requirement;
            TypeToRequirementFill[typeof(UnityEngine.Vector3)] = FillVector3Requirement;
        }
    }
}
